# Transform Module TODO

## Enriched Columns Cleaning Configuration

### Task Description
Add configuration patterns for enriched columns generated by the enrichment module (e.g., `sma_*`, `rsi_*`, `*_ratio`, `*_margin`, etc.).

### Context
Currently, the `cleaning_config.json` has a catch-all pattern (`.*`) that applies default rules to any unmatched columns. While this works, enriched columns may benefit from more specific policies tailored to their nature as calculated features.

### Requirements
1. **Identify common enrichment patterns:**
   - Technical indicators: `sma_*`, `ema_*`, `rsi_*`, `macd_*`, `bbands_*`, etc.
   - Financial ratios: `*_ratio`, `*_margin`, `*_coverage`, etc.
   - Generic helpers: `*_growth`, `*_change`, `rolling_*`, etc.
   - Multi-output features: Features that return DataFrames with multiple columns

2. **Define appropriate policies:**
   - **Data type:** Most enriched features are numeric (float)
   - **Null tolerance:** Consider whether calculated features should have stricter or looser null thresholds
   - **Column deletion:** Should enriched features ever be deleted, or always preserved?
   - **Imputation strategy:** Is normal distribution appropriate for calculated values?
   - **Validations:** Do enriched features need specific range validations?

3. **Add patterns to `cleaning_config.json`:**
   ```json
   {
     "comment": "Technical indicators - calculated features",
     "pattern": "^(sma|ema|rsi|macd|bbands|stoch|atr|obv)_.*",
     "dtype": "float",
     "null_threshold": 0.8,
     "allow_column_deletion": false,
     "imputation_strategy": "normal_distribution",
     "validations": []
   }
   ```

4. **Consider edge cases:**
   - Some enriched features may be integers (e.g., `session_flags_dow`)
   - Some may have specific value ranges (e.g., RSI between 0-100)
   - Binary features (e.g., `earnings_beat`)

### Notes
- This is a future enhancement and not blocking current functionality
- The catch-all pattern provides reasonable defaults for now
- Implementation should be based on actual usage patterns observed in production

### Priority
- **Low to Medium** - Nice to have, but current system is functional

### Related Files
- `transform/cleaning_config.json` - Configuration file to update
- `transform/enrichment.py` - Source of enriched column names
- `transform/registry.yaml` - Feature definitions that generate these columns
